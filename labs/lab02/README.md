# Lab 2. Bash

Предлагается решить одну "обязательную" задачу и по желанию — оставшиеся (со звёздочкой).


## Задача 1 («Info»)

Надо написать скрипт, который бы создавал в домашней папке пользователя, запустившего скрипт, файл `info.txt` со следующей информацией:
* имя пользователя
* время запуска скрипта
* операционная система
* размер домашней директории пользователя (занимаемая память)
* объём свободной памяти на том диске, где расположена домашняя директория
* количество папок в домашней директории (без рекурсии)
* количество файлов в домашней директории (с рекурсией)

Например, пусть скрипт называется `print_info.sh`.
Пользователя пусть зовут `neo`.
А его домашняя директория `/home/neo` пусть выглядит так:
```
.
├── file1.py
├── file2.txt
└── directory1
    ├── file3.mp3
    └── directory2
        └── file5.tar
```
Пусть вес папки `/home/neo` составляет 105 Гб, а свободного места на диске есть ещё 94 Гб.
Тогда при запуске скрипта (например, из той же папки, где лежит скрипт)
```bash
./print_info.sh
```
в домашней директории пользователя с именем `neo` должен быть создан файл `info.txt` примерно следующего формата:
```
Hello, Neo

time: Mon 12 Sep 2022 10:58:57 PM MSK
os: Linux
home directory: /home/neo
memory: 105G (used), 94G (free)
num folders: 1
num files: 4
```


## Задача 2* («Помощник»)

![](./images/rover1.jpg)

Напишите скрипт, который рекурсивно просматривает все папки в домашней директории и выводит только пути до файлов с расширением ".py".
Например, пусть структура домашней директории `/home/neo` следующая:
```
.
├── file1.py
├── file2.txt
└── directory1
    ├── file3.mp3
    └── directory2
        └── file5.py
```
Тогда скрипт должен вывести
```
/home/neo/file1.py
/home/neo/directory1/directory2/file5.py
```


## Задача 3* («esreveR»)

Напишите скрипт `rev.sh`, который выводит на экран текст задом наперёд.

Если скрипту в качестве единственного аргумента передан путь до файла, то скрипт "переворачивает" текст, содержащийся в файле, выводит на экран, и завершает работу.
Например, пусть есть файл `d.txt` следующего содержания:
```
It's the rain... It makes me sentimental.
```
Тогда должна быть возможность перевернуть его:
```bash
$ ./rev.sh d.txt
.latnemitnes em sekam tI ...niar eht s'tI
```

Если же никаких аргументов скрипт не получает, то он считывает данные со входа (то есть ввели строку, нажали Enter — скрипт считал, перевернул и вывел; ввели ещё строку, скрипт снова перевернул; и так пока не будет остановлен).
Например:
```bash
$ ./rev.sh
hello
olleh
is it me you're looking for?
?rof gnikool er'uoy em ti si
```

**Встроенной командой `rev` при написании скрипта пользоваться нельзя** (но рекомендуется её хотя бы запустить пару раз, посмотреть, чтоб было понятно, что ожидается от скрипта).


## Задача 4* («Расписание»)

Напишите скрипт `schedule.sh`, который выводит на экран расписание занятий на текущий день.
Для определённости примем следующее расписание занятий:
```
Понедельник:
* физра
* иняз
* химия (лаба)

Вторник:
* тфкп (семинар)
* физика (лаба)
* физика (семинар)

Среда:
* квантмех (семинар)
* вычмат (лекция)
* вычмат (лаба)
* квантмех (лекция)
* химия (лекция)
* биология (семинар)

Четверг:
* физика (лекция)
* биология (лекция)
* информатика (лекция)
* тфкп (лекция)

Пятница:
* иняз
* физра
* информатике (лаба)
* иммунология (семинар)

Суббота:


```

Тогда при запуске в понедельник результат должен быть таким:
```bash
$ ./schedule.sh
* физра
* иняз
* химия (лаба)
```

При запуске во вторник:
```bash
$ ./schedule.sh
* тфкп (семинар)
* физика (лаба)
* физика (семинар)
```

И так далее.


## Задача 5* («Backuper»)

Напишите скрипт, который раз в два часа создаёт резервную копию домашней папки пользователя в виде `.tar` архива и сохраняет этот архив по адресу `/backup/home.tar`.

Что надо сделать, чтобы этот скрипт всегда запускался в фоне при открытии терминала?
(можно оставить комментарий в скрипте с описанием шагов)

### P.S.

В идеале такого рода скрипт (занимающийся резервным копированием) должен бы был запускаться при старте системы, а не терминала.
Чтобы работать всегда, вне завивимости от того, запущена командная оболочка или нет.
И чтобы не создавалось одинаковых процессов при открытии нескольких терминалов.


## Ссылки

![](./images/rover2.jpg)

* Консоль на Windows, в которой можно использовать команды как в Linux консоли: [Cmder](https://cmder.net/). Ещё у неё вид "поприятнее", чем у обычного cmd).
* Серия постов на Хабре про работу в консоли: [Bash-скрипты: начало](https://habr.com/ru/company/ruvds/blog/325522) (ссылка на первый пост).
* Тоже пост на Хабре (перевод англоязычной статьи) в целом про основные команды в терминале: [Bash для начинающих: 21 полезная команда](https://habr.com/ru/company/ruvds/blog/445270/).
* Ещё одна несложная статья с описанием того, что такое bash, с основными командами: [
The Linux command line for beginners](https://ubuntu.com/tutorials/command-line-for-beginners#1-overview).
* Некоторые "необычные"" команды Linux: [20 Funny Commands of Linux or Linux is Fun in Terminal](https://www.tecmint.com/20-funny-commands-of-linux-or-linux-is-fun-in-terminal) (spoiler: `who | grep -i blonde | date; cd ~; unzip; touch; strip; finger; mount; gasp; yes; uptime; umount; sleep`).

---

Источник одной из картинок с собачкой: https://twitter.com/roverfromxp1.
