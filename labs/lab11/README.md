# Lab 10. Multiverse (Threading & Multiprocessing)

Достаточно решить первую и вторую задачу.
При решении *надо использовать процессы или потоки* (то, что даст выигрыш).


## Задача 1 («‎Множители»‎)

Надо разложить на простые множители ряд натуральных чисел, которые передаются программе как агрументы командной строки.
Результат разложения на множители каждого числа надо вывести на стандартный вывод, причём в том же порядке, как числа поступали на вход.
Например, если программа называется `prime_factorization.py`, то работать она должна как-то так:
```bash
$ python prime_factorization.py 4 625 7 12 22
4: 2 2
625: 5 5 5 5
7: 7
12: 2 2 3
22: 2 11 
```

## Задача 2 («‎grep»‎)

Создайте папку с текстовыми файлами.
Например, можно накачать книг со сказками:
* https://archive.org/details/favouritefairyta00corniala
* https://archive.org/details/englishfairytal00jacogoog
* https://archive.org/details/grimmscompletefa00grim
* https://archive.org/details/fairytales00hauf

Надо написать программу, которая бы искала подстроку во всех файлах в заданной директории.
Подстрока и путь до директории передаются программе как аргументы командной строки.
Результат поиска — строки в файлах, где встречается указанная подстрока.
Если программа называется `custom_grep.py`, а книги лежат в папке `books` (и там, например, есть книги `Favourite-Fairy-Tales.txt` и `English-Fairy-Tales.txt`), то должна быть возможность сделать и получить что-то такое:
```bash
$ python custom_grep.py princess ./books
Favourite-Fairy-Tales.txt: beautiful young lady, evidently some princess,
Favourite-Fairy-Tales.txt: and handsome princess ever beheld was there,
...
English-Fairy-Tales.txt: " Sink on," cried the cruel princess, " no hand or glove
English-Fairy-Tales.txt: mill-wheels. And then they took out the princess and 
```
То есть выводится название файла и строка в нём.
Сначала должны идти строки в одном файле, потом в другом, и т.д.
Для каждого текстового файла выводимые строки должны быть упорядочены по номеру строки внутри этого файла.


## Задача 3* («‎Дубликаты»‎)

Найти все файлы-дубликаты под заданным путём.
То есть на вход программе подаётся путь до директории.
И далее надо рекурсивно обойти эту директорию и найти дубликаты.
Дубликаты — те файлы, у которых совпадают название и содержание.


## Задача 4* («‎π»‎)

Напишите программу для вычисления числа π.
Метод вычисления должен быть основан на приближении числа π частичной суммой сходящегося ряда.
Получается ли посчитать число π с точностью 100 знаков после запятой? за какое время?


## Задача 5* («‎Chamomile Divination 4»‎)

* [Chamomile Divination 1](https://github.com/Alvant/AdvancedPython/tree/master2022/labs/lab04#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-2-chamomile-divination)
* [Chamomile Divination 2](https://github.com/Alvant/AdvancedPython/blob/master2022/labs/lab08/README.md#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-8-chamomile-divination-2)
* [Chamomile Divination 3](https://github.com/Alvant/AdvancedPython/tree/master2022/labs/lab09#%D0%B7%D0%B0%D0%B4%D0%B0%D1%87%D0%B0-3-chamomile-divination-3)



<div>
<em>
  <p align="right">
    Солнышко светит,<br>
	И я иду.<br>
	Куда — сама не знаю.<br>
	Чего-то жду.<br>
    <br>
	И вот, за поворотом —<br>
	Огонь в глаза:<br>
	Ромашковое поле,<br>
	Без края и конца.
  </p>
</em>
</div>

Какое-то время Наташе нравился последний придуманный ею способ гадания по нескольким ромашкам (асинхронный).
Но и у этого способа обнаружился недостаток, с которым Наташа не захотела мириться...
Он был "нечестный".
Действительно, ведь этот асинхронный вариант выдавал "любит", если хотя бы одна ромашка предсказывала "любит".
Но Наташе не нужны такие подачки — она готова принять любой исход!

<p>
<em>
  Любой?..
  А их точно несколько? этих исходов?
  Мне уже кажется, что исход всегда был и есть только один.
  Всё остальное — лишь фантазии, дым, игра воображения.
  "Любит" — сладкая ложь.
  "Не любит" — холодная правда...
</em>
</p>

Помогите Наташе!
Реализуйте описанный далее способ гадания по нескольким ромашкам.
"Честный и многопоточный".

Наташа предлагает устроить гадание следующим образом.
На вход программе, как и раньше, подаётся список чисел лепестков на ромашках `petal_numbers` и слово – начало гадания `divination_start`.
С указанного слова `divination_start` начинают обрываться лепестки каждой ромашки.
Но теперь ромашки должны обраваться в нескольких *потоках* (или *процессах*? — Наташа точно не знает, что лучше, поэтому она просит, чтобы вы сами выбрали то, что в данной ситуации лучше использовать).

Обрывание лепестков одной ромашки – отдельная функция, которая может выполняться в нити/процессе.
В основной программе должно произойти, во-первых, распределение задач (в количестве, равном числу ромашек) по нитям/процессам.
И, во-вторых, надо *сагрегировать* результаты предсказаний отдельных ромашек: итоговое предсказание будет "любит", если большинство ромашек скажут "любит"; иначе – "не любит" (то есть даже есть предсказания разбились 50/50).

*Псевдокод* программы, реализующей предлагаемый в этот раз Наташей способ гадания по ромашкам:
```
petal_numbers <- INPUT
divination_start <- INPUT

chamomiles <- create_threads_or_processes(petal_numbers, divination_start)

FOR (chamomile IN chamomiles):
    start(chamomile)

predictions = aggregate()
final_prediction = count_max(predictions)

RETURN final_prediction
```
